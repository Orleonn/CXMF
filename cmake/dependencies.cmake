
set(BUILD_SHARED_LIBS OFF)
set(SKIP_INSTALL_LIBRARIES ON)
set(SKIP_INSTALL_ALL ON)
set(SKIP_INSTALL_HEADERS ON)
set(SKIP_INSTALL_FILES ON)

find_package(zlib)
if(NOT ZLIB_FOUND AND NOT CXMF_BUILD_ZLIB)
	message(FATAL_ERROR "CXMF_BUILD_ZLIB is OFF but unable to find zlib dependency via 'find_package'")
elseif(NOT ZLIB_FOUND)
	set(ZLIB_BUILD_EXAMPLES OFF)
	set(ZLIB_FOUND ON)
	set(ZLIB_LIBRARIES zlibstatic)
	set(ZLIB_INCLUDE_DIR ${LIBRARIES_DIR}/zlib)
	add_subdirectory(${LIBRARIES_DIR}/zlib)
endif()

if(CXMF_INCLUDE_IMPORTER)
	set(ASSIMP_BUILD_M3D_IMPORTER OFF)
	set(ASSIMP_BUILD_M3D_EXPORTER OFF)
	set(ASSIMP_BUILD_USD_IMPORTER OFF)
	set(ASSIMP_BUILD_USD_VERBOSE_LOGS OFF)
	set(ASSIMP_BUILD_VRML_IMPORTER OFF)
	set(ASSIMP_BUILD_USE_CCACHE ON)
	set(ASSIMP_HUNTER_ENABLED OFF)
	set(ASSIMP_BUILD_FRAMEWORK OFF)
	set(ASSIMP_DOUBLE_PRECISION OFF)
	set(ASSIMP_OPT_BUILD_PACKAGES OFF)
	set(ASSIMP_ANDROID_JNIIOSYSTEM OFF)
	set(ASSIMP_NO_EXPORT ON)
	set(ASSIMP_BUILD_ASSIMP_TOOLS OFF)
	set(ASSIMP_BUILD_SAMPLES OFF)
	set(ASSIMP_BUILD_TESTS OFF)
	set(ASSIMP_COVERALLS OFF)
	set(ASSIMP_INSTALL OFF)
	set(ASSIMP_WARNINGS_AS_ERRORS ON)
	set(ASSIMP_ASAN OFF)
	set(ASSIMP_UBSAN OFF)
	set(ASSIMP_BUILD_DOCS OFF)
	set(ASSIMP_INJECT_DEBUG_POSTFIX ON)
	set(ASSIMP_IGNORE_GIT_HASH ON)
	set(ASSIMP_BUILD_ZLIB OFF)
	set(ASSIMP_INSTALL_PDB OFF)
	set(ASSIMP_BUILD_ASSIMP_VIEW OFF)
	set(ASSIMP_BUILD_ALL_IMPORTERS_BY_DEFAULT OFF)
	set(ASSIMP_BUILD_ALL_EXPORTERS_BY_DEFAULT OFF)
	set(ASSIMP_BUILD_GLTF_IMPORTER ON)

	set(GLM_BUILD_LIBRARY OFF)
	set(GLM_BUILD_TESTS OFF)
	set(GLM_BUILD_INSTALL OFF)
	set(GLM_ENABLE_CXX_20 ON)

	set(MESHOPT_BUILD_DEMO OFF)
	set(MESHOPT_BUILD_GLTFPACK OFF)
	set(MESHOPT_BUILD_SHARED_LIBS OFF)
	set(MESHOPT_STABLE_EXPORTS OFF)
	set(MESHOPT_WERROR ON)
	set(MESHOPT_INSTALL OFF)

	add_subdirectory(${LIBRARIES_DIR}/assimp)
	add_subdirectory(${LIBRARIES_DIR}/glm)
	add_subdirectory(${LIBRARIES_DIR}/meshoptimizer)
endif()
